

<!DOCTYPE html>
<html>
<head>
<title>K-Frame</title>
<meta name="description" content="K-Frame">
<script src="/ARTest/resources/js/jquery.3.2.1.min.js"></script>
<script src="/ARTest/resources/js/go.js"></script>
<script src="/ARTest/resources/js/go_extention_TextEditorSelectBox.js"></script>
<script src="/ARTest/resources/js/go_extention_TextEditorRadioButtons.js"></script>
<script src="/ARTest/resources/js/highlight.js"></script>
<script src="/ARTest/resources/js/aframe-master_noneInspector.js"></script>
<script src="/ARTest/resources/js/aframe-physics-system.js"></script>
<script src="/ARTest/resources/js/aframe-physics-extras.js"></script>
<script src="/ARTest/resources/js/aframe-animation-component.js"></script>
<script src="/ARTest/resources/js/kframe_noneInspector.js"></script>
<script src="/ARTest/resources/js/aframe-extras.js"></script>
<script src="/ARTest/resources/js/aframe-text-geometry-component.js"></script>
<script src="/ARTest/resources/js/maxUtils.js"></script>
<script src="/ARTest/resources/js/components.js"></script>
<!-- <script src="/ARTest/monopoly/js/three.ar.js"></script>
<script src="/ARTest/monopoly/js/aframe-ar.js"></script> -->
<script src="/ARTest/resources/ar/three.ar.js"></script>
<script src="/ARTest/resources/ar/aframe-ar.js"></script>

<script type="text/javascript">
window.projectCode = "PROJ20181203213956912";
window.sceneCode = "SCEN20181203213957200";

//2018-11-23 임시 keydown 이벤트 추가
window.addEventListener('keydown', function(e){
    console.log("키다운 이벤트 호출 : " + e.keyCode);
    if(e.keyCode === 89){//keydownEvent y
        KEvent.broadcast('e_yes');
    } else if(e.keyCode === 78){//keydownEvent n
        KEvent.broadcast('e_no');
    }
});

/**
 * Components 에 추가될 함수
 * ComplexObject에 대한 경로를 가져온다.
 * @param id
 * @param clip
 * @returns {string}
 * @constructor
 */

 /**** 서버에서 자동으로 만들어지는 스크립트 ****/
 var _ComplexObjectList = new Array();
 var obj = new Object();
 obj.id = "COBJ111111";
 var tmp = new Array();
 tmp.push({"clip":"1", "src":"/ARTest/models/samples/Dice_Left_Num1.glb"});
 tmp.push({"clip":"2", "src":"/ARTest/models/samples/Dice_Left_Num2.glb"});
 tmp.push({"clip":"3", "src":"/ARTest/models/samples/Dice_Left_Num3.glb"});
 tmp.push({"clip":"4", "src":"/ARTest/models/samples/Dice_Left_Num4.glb"});
 tmp.push({"clip":"5", "src":"/ARTest/models/samples/Dice_Left_Num5.glb"});
 tmp.push({"clip":"6", "src":"/ARTest/models/samples/Dice_Left_Num6.glb"});
 obj.clip = tmp;
 _ComplexObjectList.push(obj);

 obj = new Object();
 obj.id = "COBJ222222";
 tmp = new Array();
 tmp.push({"clip":"1", "src":"/ARTest/models/samples/Dice_Right_Num1.glb"});
 tmp.push({"clip":"2", "src":"/ARTest/models/samples/Dice_Right_Num2.glb"});
 tmp.push({"clip":"3", "src":"/ARTest/models/samples/Dice_Right_Num3.glb"});
 tmp.push({"clip":"4", "src":"/ARTest/models/samples/Dice_Right_Num4.glb"});
 tmp.push({"clip":"5", "src":"/ARTest/models/samples/Dice_Right_Num5.glb"});
 tmp.push({"clip":"6", "src":"/ARTest/models/samples/Dice_Right_Num6.glb"});
 obj.clip = tmp;
 _ComplexObjectList.push(obj);

 obj = new Object();
 obj.id = "COBJ33333";
 tmp = new Array();
 tmp.push({"clip":"idle", "src":"/ARTest/models/samples/male_idle.glb"});
 tmp.push({"clip":"run", "src":"/ARTest/models/samples/male_run.glb"});
 tmp.push({"clip":"cheer", "src":"/ARTest/models/samples/male_cheer.glb"});
 tmp.push({"clip":"defeat", "src":"/ARTest/models/samples/male_defeat.glb"});
 obj.clip = tmp;
 _ComplexObjectList.push(obj);

 obj = new Object();
 obj.id = "COBJ44444";
 tmp = new Array();
 tmp.push({"clip":"idle", "src":"/ARTest/models/samples/female_idle.glb"});
 tmp.push({"clip":"run", "src":"/ARTest/models/samples/female_run.glb"});
 tmp.push({"clip":"cheer", "src":"/ARTest/models/samples/female_cheer.glb"});
 tmp.push({"clip":"defeat", "src":"/ARTest/models/samples/female_defeat.glb"});
 obj.clip = tmp;
 _ComplexObjectList.push(obj);

 console.log(_ComplexObjectList);
/**** /서버에서 자동으로 만들어지는 스크립트/ ****/

var _AssetObject_;
function setAssetObject(value) {
    _AssetObject_ = value;
}

function showAlert() {
    alert(_AssetObject_);
    _AssetObject_.showAlert();
}

var _ComponentObject_;
function setComponentObject(obj) {
    _ComponentObject_ = obj;
}

function reloadAsset() {
    _AssetObject_.load();
}
function getSceneData() {
    return maxUtils.getCurrentSceneData();
}

function getProjectCode() {
    return window.projectCode;
}

var isOpenInspector = true;
function Inspector() {
    if(isOpenInspector) {
        AFRAME.INSPECTOR.close();
        isOpenInspector = false;
    } else {
        AFRAME.INSPECTOR.open();
        isOpenInspector = true;
    }
}

var CustomComponentList = new Array();

var __component;
    try {
    __component = new Object();
    __component.componentCode = "COMP20181203213957588";
    __component.componentName = "testmove";
    __component.dataJson = maxUtils.replaceAll('{"id":"COMP20181203213957588","name":"testmove","desc":"","variables":[],"events":[{"id":5,"name":"시작시","data":{"linkFromPortIdProperty":"fromPinUid","linkToPortIdProperty":"toPinUid","linkFromKeyProperty":"fromNodeKey","linkToKeyProperty":"toNodeKey","nodeCategoryProperty":"kind","linkCategoryProperty":"clazz","nodeKeyProperty":"key","nodeDataArray":[{"key":1,"id":"CODE20180404201644461","kind":"event","text":"시작시","inputs":[],"outputs":[{"uid":"1","id":"out0","clazz":"Flow","text":"","__gohashid":1417}],"loc":"0 0","__gohashid":1385}],"linkDataArray":[]}},{"id":3,"name":"클릭시","data":{"linkFromPortIdProperty":"fromPinUid","linkToPortIdProperty":"toPinUid","linkFromKeyProperty":"fromNodeKey","linkToKeyProperty":"toNodeKey","nodeCategoryProperty":"kind","linkCategoryProperty":"clazz","nodeKeyProperty":"key","nodeDataArray":[{"key":1,"id":"CODE20180404204924566","kind":"event","text":"클릭시","inputs":[],"outputs":[{"uid":"1","id":"out0","clazz":"Flow","text":"","__gohashid":1264}],"loc":"1 2","__gohashid":1171},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":2023},{"uid":"2","id":"CODE20180312190815795","text":"간격","clazz":"Float","value":"4","__gohashid":2035},{"uid":"3","id":"CODE20180312190809173","text":"횟수","clazz":"Integer","value":"1","__gohashid":2045}],"outputs":[{"uid":"4","id":"CODE20180321143909643","text":"실행","clazz":"Flow","__gohashid":2054},{"uid":"5","id":"CODE20180321143909643","text":"완료","clazz":"Flow","__gohashid":2062}],"id":"NODE20181129164829640","text":"일정간격실행","kind":"logic","key":2,"loc":"288.0000000000001 132.2831925194888","__gohashid":14382},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":3043},{"uid":"2","id":"CODE20180312190822272","text":"대상아이디","clazz":"String","value":"sphere","__gohashid":3055},{"uid":"3","id":"CODE20180312190822272","text":"종료위치","clazz":"String","value":"40 20 0","__gohashid":3065},{"uid":"4","id":"CODE20180312190815795","text":"이동시간","clazz":"Float","value":"2","__gohashid":3076},{"uid":"5","id":"CODE20180312190822272","text":"크기","clazz":"String","value":"20 20 20","__gohashid":3087},{"uid":"6","id":"CODE20180312190822272","text":"회전","clazz":"String","value":"0 0 0","__gohashid":3098},{"uid":"7","id":"CODE20180312190815795","text":"투명도","clazz":"Float","value":"1","__gohashid":3109},{"uid":"8","id":"CODE20180312190822272","text":"색상","clazz":"String","value":"#c9baf7","__gohashid":3120}],"outputs":[{"uid":"9","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":3129}],"id":"NODE20181025192849308","text":"변형","kind":"function","key":3,"loc":"657 65.27104996876275","__gohashid":14447},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":5999},{"uid":"2","id":"CODE20180312190822272","text":"대상아이디","clazz":"String","value":"sphere","__gohashid":6011},{"uid":"3","id":"CODE20180312190822272","text":"종료위치","clazz":"String","value":"0 20 0","__gohashid":6021},{"uid":"4","id":"CODE20180312190815795","text":"이동시간","clazz":"Float","value":"2","__gohashid":6032},{"uid":"5","id":"CODE20180312190822272","text":"크기","clazz":"String","value":"20 20 20","__gohashid":6043},{"uid":"6","id":"CODE20180312190822272","text":"회전","clazz":"String","value":"0 0 0","__gohashid":6054},{"uid":"7","id":"CODE20180312190815795","text":"투명도","clazz":"Float","value":"1","__gohashid":6065},{"uid":"8","id":"CODE20180312190822272","text":"색상","clazz":"String","value":"#c9baf7","__gohashid":6076}],"outputs":[{"uid":"9","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":6085}],"id":"NODE20181025192849308","text":"변형","kind":"function","key":4,"loc":"1017.0000000000002 60.312876576731725","__gohashid":14563},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":8959},{"uid":"2","id":"CODE20180312190822272","text":"대상아이디","clazz":"String","value":"sphere","__gohashid":8971},{"uid":"3","id":"CODE20180312190822272","text":"종료위치","clazz":"String","value":"0 50 0","__gohashid":8981},{"uid":"4","id":"CODE20180312190815795","text":"이동시간","clazz":"Float","value":"2","__gohashid":8992},{"uid":"5","id":"CODE20180312190822272","text":"크기","clazz":"String","value":"20 20 20","__gohashid":9003},{"uid":"6","id":"CODE20180312190822272","text":"회전","clazz":"String","value":"0 0 0","__gohashid":9014},{"uid":"7","id":"CODE20180312190815795","text":"투명도","clazz":"Float","value":"1","__gohashid":9025},{"uid":"8","id":"CODE20180312190822272","text":"색상","clazz":"String","value":"#c9baf7","__gohashid":9036}],"outputs":[{"uid":"9","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":9045}],"id":"NODE20181025192849308","text":"변형","kind":"function","key":8,"loc":"964.9999999999999 350.18825291905915","__gohashid":14679},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":8844},{"uid":"2","id":"CODE20180404190900288","text":"조건식","clazz":"Boolean","value":"true","__gohashid":8856}],"outputs":[{"uid":"3","id":"CODE20180321143909643","text":"참","clazz":"Flow","__gohashid":8864},{"uid":"4","id":"CODE20180321143909643","text":"거짓","clazz":"Flow","__gohashid":8872},{"uid":"5","id":"CODE20180321143909643","text":"기본","clazz":"Flow","__gohashid":8878}],"id":"NODE20181128165741880","text":"분기","kind":"logic","key":5,"loc":"593.8028801568965 431.75000000000017","__gohashid":14788},{"returnType":"CODE20180313181603246","returnTypeName":"Void","inputs":[{"uid":"1","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":11911},{"uid":"2","id":"CODE20180312190822272","text":"대상아이디","clazz":"String","value":"sphere","__gohashid":11923},{"uid":"3","id":"CODE20180312190822272","text":"텍스트","clazz":"String","value":"끝났습니다.","__gohashid":11933},{"uid":"4","id":"CODE20180312190822272","text":"색상","clazz":"String","value":"#000000","__gohashid":11944}],"outputs":[{"uid":"5","id":"CODE20180321143909643","text":"Flow","clazz":"Flow","__gohashid":11953}],"id":"NODE20181107005902507","text":"3D 텍스트설정","kind":"function","key":7,"loc":"955 631.8285022489735","__gohashid":14862}],"linkDataArray":[{"clazz":"Flow","fromNodeKey":2,"fromPinUid":"4","toNodeKey":3,"toPinUid":"1","__gohashid":14556},{"clazz":"Flow","fromNodeKey":3,"fromPinUid":"9","toNodeKey":4,"toPinUid":"1","__gohashid":14672},{"clazz":"Flow","fromNodeKey":5,"fromPinUid":"3","toNodeKey":8,"toPinUid":"1","__gohashid":14848},{"clazz":"Flow","fromNodeKey":2,"fromPinUid":"5","toNodeKey":5,"toPinUid":"1","__gohashid":14855},{"clazz":"Flow","fromNodeKey":5,"fromPinUid":"5","toNodeKey":7,"toPinUid":"1","__gohashid":14931},{"clazz":"Flow","__gohashid":16411,"fromNodeKey":1,"toNodeKey":2,"fromPinUid":"1","toPinUid":"1"}]}},{"id":4,"name":"newEvent_1","data":{"linkFromPortIdProperty":"fromPinUid","linkToPortIdProperty":"toPinUid","linkFromKeyProperty":"fromNodeKey","linkToKeyProperty":"toNodeKey","nodeCategoryProperty":"kind","linkCategoryProperty":"clazz","nodeKeyProperty":"key","nodeDataArray":[{"key":1,"id":"CODE20180317171800741","kind":"event","text":"이벤트 호출 시","inputs":[{"uid":"1","id":"out0","clazz":"String","text":"호출될 이벤트명","value":"newEvent_1","__gohashid":1267}],"outputs":[{"uid":"2","id":"out0","clazz":"Flow","text":"","__gohashid":1279}],"loc":"0 0","__gohashid":1171}],"linkDataArray":[]}}]}', '""""', '""');


    var COMP20181203213957588_cp = {
	schema : {
	},
	onInit : function() {
		KEvent.addEventListener("newEvent_1", this.on_newEvent_1.bind(this));
		this.el.addEventListener("newEvent_1", this.on_newEvent_1.bind(this));
	},
	onStart : function() {
	},
	onMouseDown : function() {
		new Promise(function (resolve, reject) {
			this.startCoroutine(
			function* () {
				var cnt = 0;
				do {
					cnt++;
					new Promise(function (resolve, reject) {
						this.startCoroutine(
						function* () {
							var sumTime = 0.0;
							var startPosition = this.el.getAttribute("position");
							var directionVector = new THREE.Vector3(0, 0, 0);
							directionVector.copy(startPosition);
							var endPosition = "40 20 0";
							if(endPosition == null || endPosition == undefined || endPosition == ""){
								endPosition = directionVector;
							}
							var startScale = this.el.getAttribute("scale");
							var scaleVector = new THREE.Vector3(0, 0, 0);
							scaleVector.copy(startScale);
							var endScale = "20 20 20";
							if(endScale == null || endScale == undefined || endScale == ""){
								endScale = scaleVector;
							}
							var startRotation = this.el.getAttribute("rotation");
							var rotationVector = new THREE.Vector3(0, 0, 0);
							rotationVector.copy(startRotation);
							var endRotation = "0 0 0";
							console.log("****************endRotation ");
							console.log(endRotation);
							if(endRotation == null || endRotation == undefined || endRotation == ""){
								endRotation = rotationVector;
							}
							var startColor = "#ffffff";
							var endColor = "#c9baf7";
							var startAlpha = 1;
							var endAlpha = 1;
							if(this.el.hasAttribute("material")){
								startColor = this.el.getAttribute("material").color;
								startAlpha = this.el.getAttribute("material").opacity;
								if(endAlpha == null || endAlpha == undefined || endAlpha == ""){
									endAlpha = startAlpha;
								}
								if(endColor == null || endColor == undefined || endColor == ""){
									endColor = startColor;
								}
							}else if(this.el.hasAttribute("light")){
								startColor = this.el.getAttribute("light").color;
								if(endColor == null || endColor == undefined || endColor == ""){
									endColor = startColor;
								}
							}
							do {
								sumTime += Time.deltaTime;
								if (2 == 0) {
									this.el.setAttribute("position", endPosition);
									this.el.setAttribute("scale", endScale);
									this.el.setAttribute("rotation", endRotation);
									if (this.el.hasAttribute('material')) {
										this.el.setAttribute("material", "color", endColor);
										this.el.setAttribute("material", "opacity", endAlpha);
									} else if (this.el.hasAttribute('light')) {
										this.el.setAttribute("light", "color", endColor);
									}
								} else {
									var position = maxUtils.vectorConstant(directionVector, AFRAME.utils.coordinates.parse(endPosition), sumTime, 2);
									this.el.setAttribute("position", position);
									var scale = maxUtils.vectorConstant(scaleVector, AFRAME.utils.coordinates.parse(endScale), sumTime, 2);
									this.el.setAttribute("scale", scale);
									var rotation = maxUtils.vectorConstant(rotationVector, AFRAME.utils.coordinates.parse(endRotation), sumTime, 2);
									this.el.setAttribute("rotation", rotation);
									if (this.el.hasAttribute('material')) {
										var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
										this.el.setAttribute("material", "color", color);
										var alpha = maxUtils.constant(startAlpha, endAlpha, sumTime, 2);
										this.el.setAttribute("material", "opacity", alpha);
									} else if (this.el.hasAttribute('light')) {
										var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
										this.el.setAttribute("light", "color", color);
									}
								}
								yield null;	//1프레임 기다림
							} while (sumTime < 2)
							this.el.setAttribute("position", endPosition);
							this.el.setAttribute("scale", endScale);
							this.el.setAttribute("rotation", endRotation);
							if (this.el.hasAttribute('material')) {
								this.el.setAttribute("material", "color", endColor);
								this.el.setAttribute("material", "opacity", endAlpha);
							} else if (this.el.hasAttribute('light')) {
								this.el.setAttribute("light", "color", endColor);
							}
							console.log("rotation : ");
							console.log(this.el.getAttribute("rotation"));
							resolve();
						}.bind(this)()
						);
					}.bind(this)).then(function() {
						new Promise(function (resolve, reject) {
							this.startCoroutine(
							function* () {
								var sumTime = 0.0;
								var startPosition = this.el.getAttribute("position");
								var directionVector = new THREE.Vector3(0, 0, 0);
								directionVector.copy(startPosition);
								var endPosition = "0 20 0";
								if(endPosition == null || endPosition == undefined || endPosition == ""){
									endPosition = directionVector;
								}
								var startScale = this.el.getAttribute("scale");
								var scaleVector = new THREE.Vector3(0, 0, 0);
								scaleVector.copy(startScale);
								var endScale = "20 20 20";
								if(endScale == null || endScale == undefined || endScale == ""){
									endScale = scaleVector;
								}
								var startRotation = this.el.getAttribute("rotation");
								var rotationVector = new THREE.Vector3(0, 0, 0);
								rotationVector.copy(startRotation);
								var endRotation = "0 0 0";
								console.log("****************endRotation ");
								console.log(endRotation);
								if(endRotation == null || endRotation == undefined || endRotation == ""){
									endRotation = rotationVector;
								}
								var startColor = "#ffffff";
								var endColor = "#c9baf7";
								var startAlpha = 1;
								var endAlpha = 1;
								if(this.el.hasAttribute("material")){
									startColor = this.el.getAttribute("material").color;
									startAlpha = this.el.getAttribute("material").opacity;
									if(endAlpha == null || endAlpha == undefined || endAlpha == ""){
										endAlpha = startAlpha;
									}
									if(endColor == null || endColor == undefined || endColor == ""){
										endColor = startColor;
									}
								}else if(this.el.hasAttribute("light")){
									startColor = this.el.getAttribute("light").color;
									if(endColor == null || endColor == undefined || endColor == ""){
										endColor = startColor;
									}
								}
								do {
									sumTime += Time.deltaTime;
									if (2 == 0) {
										this.el.setAttribute("position", endPosition);
										this.el.setAttribute("scale", endScale);
										this.el.setAttribute("rotation", endRotation);
										if (this.el.hasAttribute('material')) {
											this.el.setAttribute("material", "color", endColor);
											this.el.setAttribute("material", "opacity", endAlpha);
										} else if (this.el.hasAttribute('light')) {
											this.el.setAttribute("light", "color", endColor);
										}
									} else {
										var position = maxUtils.vectorConstant(directionVector, AFRAME.utils.coordinates.parse(endPosition), sumTime, 2);
										this.el.setAttribute("position", position);
										var scale = maxUtils.vectorConstant(scaleVector, AFRAME.utils.coordinates.parse(endScale), sumTime, 2);
										this.el.setAttribute("scale", scale);
										var rotation = maxUtils.vectorConstant(rotationVector, AFRAME.utils.coordinates.parse(endRotation), sumTime, 2);
										this.el.setAttribute("rotation", rotation);
										if (this.el.hasAttribute('material')) {
											var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
											this.el.setAttribute("material", "color", color);
											var alpha = maxUtils.constant(startAlpha, endAlpha, sumTime, 2);
											this.el.setAttribute("material", "opacity", alpha);
										} else if (this.el.hasAttribute('light')) {
											var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
											this.el.setAttribute("light", "color", color);
										}
									}
									yield null;	//1프레임 기다림
								} while (sumTime < 2)
								this.el.setAttribute("position", endPosition);
								this.el.setAttribute("scale", endScale);
								this.el.setAttribute("rotation", endRotation);
								if (this.el.hasAttribute('material')) {
									this.el.setAttribute("material", "color", endColor);
									this.el.setAttribute("material", "opacity", endAlpha);
								} else if (this.el.hasAttribute('light')) {
									this.el.setAttribute("light", "color", endColor);
								}
								console.log("rotation : ");
								console.log(this.el.getAttribute("rotation"));
								resolve();
							}.bind(this)()
							);
						}.bind(this)).then(function() {
						}.bind(this));
					}.bind(this));
					yield new WaitForSeconds(4);	//1프레임 기다림
				} while (cnt < 1)
				if (true) {
					new Promise(function (resolve, reject) {
						this.startCoroutine(
						function* () {
							var sumTime = 0.0;
							var startPosition = this.el.getAttribute("position");
							var directionVector = new THREE.Vector3(0, 0, 0);
							directionVector.copy(startPosition);
							var endPosition = "0 50 0";
							if(endPosition == null || endPosition == undefined || endPosition == ""){
								endPosition = directionVector;
							}
							var startScale = this.el.getAttribute("scale");
							var scaleVector = new THREE.Vector3(0, 0, 0);
							scaleVector.copy(startScale);
							var endScale = "20 20 20";
							if(endScale == null || endScale == undefined || endScale == ""){
								endScale = scaleVector;
							}
							var startRotation = this.el.getAttribute("rotation");
							var rotationVector = new THREE.Vector3(0, 0, 0);
							rotationVector.copy(startRotation);
							var endRotation = "0 0 0";
							console.log("****************endRotation ");
							console.log(endRotation);
							if(endRotation == null || endRotation == undefined || endRotation == ""){
								endRotation = rotationVector;
							}
							var startColor = "#ffffff";
							var endColor = "#c9baf7";
							var startAlpha = 1;
							var endAlpha = 1;
							if(this.el.hasAttribute("material")){
								startColor = this.el.getAttribute("material").color;
								startAlpha = this.el.getAttribute("material").opacity;
								if(endAlpha == null || endAlpha == undefined || endAlpha == ""){
									endAlpha = startAlpha;
								}
								if(endColor == null || endColor == undefined || endColor == ""){
									endColor = startColor;
								}
							}else if(this.el.hasAttribute("light")){
								startColor = this.el.getAttribute("light").color;
								if(endColor == null || endColor == undefined || endColor == ""){
									endColor = startColor;
								}
							}
							do {
								sumTime += Time.deltaTime;
								if (2 == 0) {
									this.el.setAttribute("position", endPosition);
									this.el.setAttribute("scale", endScale);
									this.el.setAttribute("rotation", endRotation);
									if (this.el.hasAttribute('material')) {
										this.el.setAttribute("material", "color", endColor);
										this.el.setAttribute("material", "opacity", endAlpha);
									} else if (this.el.hasAttribute('light')) {
										this.el.setAttribute("light", "color", endColor);
									}
								} else {
									var position = maxUtils.vectorConstant(directionVector, AFRAME.utils.coordinates.parse(endPosition), sumTime, 2);
									this.el.setAttribute("position", position);
									var scale = maxUtils.vectorConstant(scaleVector, AFRAME.utils.coordinates.parse(endScale), sumTime, 2);
									this.el.setAttribute("scale", scale);
									var rotation = maxUtils.vectorConstant(rotationVector, AFRAME.utils.coordinates.parse(endRotation), sumTime, 2);
									this.el.setAttribute("rotation", rotation);
									if (this.el.hasAttribute('material')) {
										var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
										this.el.setAttribute("material", "color", color);
										var alpha = maxUtils.constant(startAlpha, endAlpha, sumTime, 2);
										this.el.setAttribute("material", "opacity", alpha);
									} else if (this.el.hasAttribute('light')) {
										var color = maxUtils.colorConstant(startColor, endColor, sumTime, 2);
										this.el.setAttribute("light", "color", color);
									}
								}
								yield null;	//1프레임 기다림
							} while (sumTime < 2)
							this.el.setAttribute("position", endPosition);
							this.el.setAttribute("scale", endScale);
							this.el.setAttribute("rotation", endRotation);
							if (this.el.hasAttribute('material')) {
								this.el.setAttribute("material", "color", endColor);
								this.el.setAttribute("material", "opacity", endAlpha);
							} else if (this.el.hasAttribute('light')) {
								this.el.setAttribute("light", "color", endColor);
							}
							console.log("rotation : ");
							console.log(this.el.getAttribute("rotation"));
							resolve();
						}.bind(this)()
						);
					}.bind(this)).then(function() {
					}.bind(this));
				} else {
				}
				maxUtils.Set3DText("sphere", "끝났습니다.", "#000000", this.el, '');
				resolve();
			}.bind(this)()
			);
		}.bind(this));
	},
	on_newEvent_1 : function() {
	}
};
    __component.dataJs = COMP20181203213957588_cp;

    CustomComponentList.push(__component);
    KFRAME.registerComponent(__component.componentName, __component.dataJs);
} catch(e) {
}


</script>

</head>
<body id="__a-scene-data__" calss="a-body">
	<a-scene id="장면" broadcast="" ar="">
	<a-entity id="배경조명" light="type:ambient;color:#BBB"></a-entity>
	<a-entity id="방향조명(직사광선)" position="7.076 3.486 5.665" light="castShadow:true"></a-entity>
			<a-entity id="주카메라" position="-95.313 99.445 150" rotation="-28.247 -37.128 -5.099">
				<a-entity id="camera" camera="active:true;far:100000" look-controls="" wasd-controls="" rotation="0 0 0">
					<a-entity cursor="" geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.016" material="color: #EEE" position="0 0 -1"></a-entity>
				</a-entity>
			</a-entity>
	<a-entity id="sphere" geometry="primitive:sphere" position="0 50 0" scale="20 20 20" material="color:#c9baf7" shadow="" testmove=""></a-entity>
	</a-scene>
</body>
</html>
